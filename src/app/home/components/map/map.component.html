<ion-content>
  <app-header-network [orientation]="'start'"></app-header-network>
  <div style="height: 70%; width: 100%" *ngIf="!!receivedData">
    <app-mapbox-map
      [destiniyPoint]="markerDestiny"
      [currentPoint]="currentPoint"
      [center]="center"
    ></app-mapbox-map>
  </div>
  <div style="height: 30%">
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-label style="flex: 1">
            <h1>{{ receivedData.NomCliente }}</h1>
            <h3>Direccion: {{ receivedData.Direccion }}</h3>
            <h3>Telefono: {{ receivedData.Telefono }}</h3>
            <h3>Distancia: {{ cambioDistancias | number : "1.0-0" }}</h3>
            <h3>test labels : {{ mssg }}</h3>
            <h3>time : {{ timestampText | date : "hh:mm:ss a" }}</h3>
          </ion-label>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-grid>
          <ion-row>
            <ion-col>
              <ion-button id="open-modal">Procesar</ion-button>
            </ion-col>
            <ion-col size="auto">
              <ion-button [routerLink]="['../index']">
                <ion-icon name="exit-sharp"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>

        <ion-modal
          #modal
          trigger="open-modal"
          [canDismiss]="canDismiss"
          [presentingElement]="presentingElement"
        >
          <ng-template>
            <ion-header>
              <ion-toolbar>
                <ion-title>Modal</ion-title>
                <ion-buttons slot="end">
                  <ion-button (click)="modal.dismiss()">Close</ion-button>
                </ion-buttons>
              </ion-toolbar>
            </ion-header>
            <ion-header>
              <ion-toolbar>
                <ion-title> Formulario </ion-title>
              </ion-toolbar>
            </ion-header>

            <ion-content>
              <form (ngSubmit)="modal.dismiss()">
                <ion-list>
                  <ion-radio-group
                    [allowEmptySelection]="true"
                    [(ngModel)]="selectedOption"
                    name="razonSelection"
                    *ngFor="let razon of razones"
                  >
                    <div
                      *ngIf="
                        razon.EstadoEntrega != 3 && razon.EstadoEntrega != 1
                      "
                    >
                      <ion-radio
                        value="{{ razon.EstadoEntrega }}"
                        labelPlacement="end"
                        style="margin-left: 1rem"
                        >{{ razon.Descripcion }}</ion-radio
                      ><br />
                    </div>

                    <div
                      *ngIf="
                        razon.EstadoEntrega == 3 && cambioDistancias <= 175690
                      "
                    >
                      <ion-radio
                        value="{{ razon.EstadoEntrega }}"
                        labelPlacement="end"
                        style="margin-left: 1rem"
                        >{{ razon.Descripcion }}</ion-radio
                      ><br />
                    </div>
                  </ion-radio-group>

                  <ion-item>
                    <ion-label position="floating">Comentario</ion-label>
                    <ion-label position="floating" *ngIf="selectedOption == '4'"
                      >En caso de ser anulada debe justificar</ion-label
                    >
                    <ion-input
                      type="text"
                      [(ngModel)]="inputValue"
                      name="inputField"
                    ></ion-input>
                  </ion-item>
                </ion-list>
                <ion-button
                  expand="full"
                  type="submit"
                  *ngIf="
                    selectedOption == '4' &&
                    inputValue != undefined &&
                    inputValue != null
                  "
                  >Enviar</ion-button
                >
                <ion-button
                  expand="full"
                  type="submit"
                  *ngIf="selectedOption != '4' && !!selectedOption"
                  >Enviar</ion-button
                >
              </form>
            </ion-content>
          </ng-template>
        </ion-modal>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>
